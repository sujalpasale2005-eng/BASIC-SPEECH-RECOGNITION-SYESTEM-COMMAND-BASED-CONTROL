#include <SoftwareSerial.h>
#include "VoiceRecognitionV3.h"

/**
  Connection:
  Arduino    VR Module
  2 (RX)  <-- TXD
  3 (TX)  --> RXD
**/
VR myVR(2, 3);    
uint8_t buf[64];
int devicePin = 13; // Pin connected to LED or Relay

#define onRecord    (0) // Index of "Light On" command
#define offRecord   (1) // Index of "Light Off" command

void setup() {
  myVR.begin(9600);
  Serial.begin(115200);
  pinMode(devicePin, OUTPUT);
  
  // Load the commands into the active recognizer (max 7 at a time)
  if(myVR.load((uint8_t)onRecord) >= 0) Serial.println("On record loaded");
  if(myVR.load((uint8_t)offRecord) >= 0) Serial.println("Off record loaded");
}

void loop() {
  int ret = myVR.recognize(buf, 50);
  if(ret > 0) {
    switch(buf[1]) {
      case onRecord:
        digitalWrite(devicePin, HIGH);
        Serial.println("Device ON");
        break;
      case offRecord:
        digitalWrite(devicePin, LOW);
        Serial.println("Device OFF");
        break;
    }
  }
}
